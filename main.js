(()=>{"use strict";var e=document.querySelector(".page"),t=e.querySelector(".popup_profile"),r=e.querySelector(".popup_add"),n=function(e){e.classList.add("popup_opened"),document.addEventListener("keydown",i),e.addEventListener("click",c)},o=function(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",i),e.removeEventListener("click",c)},i=function(t){if("Escape"===t.key){var r=e.querySelector(".popup_opened");o(r)}},c=function(e){var t=e.target.classList.contains("popup"),r=e.target.classList.contains("popup__close-btn");(t||r)&&o(e.currentTarget)},s=e.querySelector(".elements"),l=e.querySelector("#card").content,u=e.querySelector(".popup_view"),a=u.querySelector(".popup__view-image"),p=u.querySelector(".popup__view-title"),d=function(e){var t=function(e){var t=e.name,r=e.link,o=l.querySelector(".element").cloneNode(!0),i=o.querySelector(".element__image");return i.src=r,i.alt=t,o.querySelector(".element__title").textContent=t,o.querySelector(".element__like").addEventListener("click",(function(e){e.target.classList.toggle("element__like_active")})),o.querySelector(".element__del-button").addEventListener("click",(function(){o.remove()})),i.addEventListener("click",(function(){a.src=r,a.alt=t,p.textContent=t,n(u)})),o}(e);s.prepend(t)};function _(e){var t=e.getAttribute("id");return document.getElementById("".concat(t,"-error"))}function v(e,t,r){e.classList.remove(r.inputErrorClass),t.textContent="",t.classList.remove(r.errorClass)}function m(e,t){var r=e.querySelector(t.submitButtonSelector);e.checkValidity()?(r.classList.remove(t.inactiveButtonClass),r.removeAttribute("disabled")):(r.classList.add(t.inactiveButtonClass),r.setAttribute("disabled","disabled"))}function y(e,t){var r=e.querySelector(t.formSelector);r.querySelectorAll(t.inputSelector).forEach((function(e){v(e,_(e),t)})),m(r,t)}var f=e.querySelector(".profile__title"),S=e.querySelector(".profile__subtitle"),k=e.querySelector(".profile__edit-button"),q=e.querySelector(".profile__add-button"),b=t.querySelector(".popup__form"),L=t.querySelector(".popup__input_type_name"),E=t.querySelector(".popup__input_type_about"),g=r.querySelector(".popup__form"),C=r.querySelector(".popup__input_type_place"),h=r.querySelector(".popup__input_type_link");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach(d),k.addEventListener("click",(function(){b.reset(),y(t,j),n(t),L.value=f.textContent,E.value=S.textContent})),q.addEventListener("click",(function(){g.reset(),y(r,j),n(r)})),b.addEventListener("submit",(function(){f.textContent=L.value,S.textContent=E.value,o(t)})),g.addEventListener("submit",(function(){var e={name:C.value,link:h.value};d(e),o(r)}));var x,j={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__submit-btn_disabled",inputErrorClass:"popup__input_error",errorClass:"popup__error_visible"};x=j,document.querySelectorAll(x.formSelector).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){e.querySelectorAll(t.inputSelector).forEach((function(r){r.addEventListener("input",(function(r){!function(e,t,r){var n=e.target;(function(e,t,r){e.validity.patternMismatch?e.setCustomValidity(e.dataset.errorMessage):e.setCustomValidity(""),e.validity.valid?v(e,t,r):function(e,t,r){e.classList.add(r.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(r.errorClass)}(e,t,r)})(n,_(n),r),m(t,r)}(r,e,t)}))}))}(e,x)}))})();